### README

# Bond Notification Bot

Этот бот для Telegram позволяет пользователям отслеживать изменения бонусов для заданных бондов. Пользователи подписываются на указанный канал, после чего могут задать параметры отслеживания. Бот проверяет данные каждые 5 минут и уведомляет пользователей, если условия выполнены.

---

## Функционал
1. **Подписка на канал**  
   Пользователь должен быть подписан на указанный канал для получения доступа к функционалу бота.
   
2. **Установка параметров отслеживания**  
   Команда `/setbond <индекс бонда> <целевой бонус>` позволяет задать бонд и минимальный бонус, при достижении которого пользователь будет уведомлен.

3. **Уведомления**  
   Бот каждые 5 минут проверяет состояние бондов. Если бонус для заданного бонда превышает указанный пользователем, бот отправляет уведомление.

---

## Установка

### 1. Клонирование репозитория
```bash
git clone <URL репозитория>
cd <имя папки>
```

### 2. Установка зависимостей
Убедитесь, что у вас установлен Python 3.8 или выше. Затем установите зависимости:
```bash
pip install -r requirements.txt
```

### 3. Настройка переменных окружения
Создайте файл `.env` в корневой папке проекта и добавьте ваш токен API Telegram:
```
BOT_API=ваш_токен_бота
```

---

## Использование

### Запуск бота
```bash
python bot.py
```

### Команды пользователя
- **`/start`**  
  Проверяет подписку пользователя на канал и предоставляет доступ к функционалу.
  
- **`/setbond <индекс> <целевой_бонус>`**  
  Задает параметры отслеживания для бонда:
  - `<индекс>` — индекс бонда, например, `2015`.
  - `<целевой_бонус>` — минимальный процент бонуса, при котором отправляется уведомление.

---

## Структура проекта

- `bot.py`: Основной файл запуска бота.
- `settings.py`: Настройки, включая токен бота и список каналов.
- `database.py`: Работа с базой данных SQLite (инициализация и хранение данных пользователей).
- `standart.py`: Обработка стандартных команд, таких как `/start`.
- `bonds.py`: Хендлер для работы с бондами.
- `channel.py`: Проверка подписки на каналы и генерация кнопок.
- `handlers`: Обработчики команд.
- `db`: Модуль базы данных.

---

## Пример взаимодействия

1. Пользователь заходит в бота и нажимает `/start`.
2. Если он не подписан на канал, бот предлагает подписаться.
3. После подписки пользователь задает параметры отслеживания:
   ```
   /setbond 2015 5.0
   ```
4. Бот проверяет бонус каждые 5 минут. Если бонус бонда 2015 становится >= 5.0, пользователь получает уведомление:
   ```
   Бонд 2015 достиг бонуса 5.2%.
   ```

---

## Требования

- Python 3.8+
- SQLite
- Telegram Bot API Token

---

## Контакты

Если у вас есть вопросы или предложения, напишите в [Telegram канал](https://t.me/g7team_ru).
